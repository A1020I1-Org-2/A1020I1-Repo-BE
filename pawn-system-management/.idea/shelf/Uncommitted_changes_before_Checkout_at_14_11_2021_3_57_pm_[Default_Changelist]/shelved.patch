Index: src/main/java/codegym/vn/controller/LoginController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package codegym.vn.controller;\r\n\r\nimport codegym.vn.config_sercurity.JwtTokenUtil;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.data.repository.query.Param;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.UsernamePasswordAuthenticationToken;\r\nimport org.springframework.security.core.Authentication;\r\nimport org.springframework.security.core.context.SecurityContextHolder;\r\nimport org.springframework.web.bind.annotation.*;\r\n\r\n@CrossOrigin(\"http://localhost:4200\")\r\n@RestController\r\npublic class LoginController {\r\n\r\n    @Autowired\r\n    AuthenticationManager authenticationManager;\r\n\r\n    @Autowired\r\n    private JwtTokenUtil jwtTokenUtil;\r\n\r\n    @GetMapping(value = \"/login\")\r\n    public ResponseEntity<String> doLogin(@Param(\"userName\") String userName, @Param(\"password\") String password){\r\n        // Xác thực từ username và password.\r\n        Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(userName, password));\r\n\r\n        // Nếu không xảy ra exception tức là thông tin hợp lệ\r\n        // Set thông tin authentication vào Security Context\r\n        SecurityContextHolder.getContext().setAuthentication(authentication);\r\n\r\n        // Trả về jwt cho người dùng.\r\n        String jwt = jwtTokenUtil.generateJwtToken(userName);\r\n        System.out.println(\"Token \" + jwt);\r\n        return new ResponseEntity<>(jwt, HttpStatus.OK);\r\n    }\r\n\r\n    @GetMapping(\"/random\")\r\n    public ResponseEntity<String> randomStuff(){\r\n        return new ResponseEntity<>(\"JWT Hợp lệ mới có thể thấy được message này\", HttpStatus.OK);\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/codegym/vn/controller/LoginController.java	(revision 5ececd47df8f7175d71b82ae5d852f58ac1f41cb)
+++ src/main/java/codegym/vn/controller/LoginController.java	(date 1636883858655)
@@ -21,10 +21,11 @@
     @Autowired
     private JwtTokenUtil jwtTokenUtil;
 
-    @GetMapping(value = "/login")
+    @PostMapping(value = "/login")
     public ResponseEntity<String> doLogin(@Param("userName") String userName, @Param("password") String password){
         // Xác thực từ username và password.
-        Authentication authentication = authenticationManager.authenticate(new UsernamePasswordAuthenticationToken(userName, password));
+        Authentication authentication = authenticationManager.
+                authenticate(new UsernamePasswordAuthenticationToken(userName, password));
 
         // Nếu không xảy ra exception tức là thông tin hợp lệ
         // Set thông tin authentication vào Security Context
@@ -32,13 +33,12 @@
 
         // Trả về jwt cho người dùng.
         String jwt = jwtTokenUtil.generateJwtToken(userName);
-        System.out.println("Token " + jwt);
         return new ResponseEntity<>(jwt, HttpStatus.OK);
     }
 
     @GetMapping("/random")
     public ResponseEntity<String> randomStuff(){
-        return new ResponseEntity<>("JWT Hợp lệ mới có thể thấy được message này", HttpStatus.OK);
+        return new ResponseEntity<>("Test đăng nhập với jwt thành công", HttpStatus.OK);
     }
 
 }
Index: src/main/resources/application.properties
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>spring.datasource.url=jdbc:mysql://localhost:3306/pawn_system_management?createDatabaseIfNotExist=true\r\nspring.datasource.username=root\r\nspring.datasource.password=LeDung123\r\nspring.jpa.hibernate.ddl-auto=update\r\nspring.jpa.show-sql=false\r\n\r\njwt.secret=javainuse\r\njwt.get.token.uri=/authenticate\r\n\r\n\r\n\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>windows-1258
===================================================================
--- src/main/resources/application.properties	(revision 5ececd47df8f7175d71b82ae5d852f58ac1f41cb)
+++ src/main/resources/application.properties	(date 1636882591335)
@@ -4,8 +4,6 @@
 spring.jpa.hibernate.ddl-auto=update
 spring.jpa.show-sql=false
 
-jwt.secret=javainuse
-jwt.get.token.uri=/authenticate
 
 
 
